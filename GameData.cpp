
#include "GameData.hpp"
#include "Items.hpp" 
#include <iostream>
#include <set>
#include <queue>
#include <cmath> // for std::abs
#include "DatabaseManager.hpp"
#include <pqxx/pqxx>
#include <stdexcept>
#include <memory>
#include <map>
#include <vector>
#include <string>
#include "AreaData.hpp"

// All global variables are defined here, at the top, so all functions in this file can see them.

const std::vector<std::string> ALL_AREAS = {
    "FOREST", "CAVES", "RUINS", "SWAMP", "MOUNTAINS", "DESERT", "VOLCANO"
};
std::map<std::string, int> g_item_buy_prices;
std::map<std::string, std::vector<std::string>> g_effect_suffix_pools;
std::vector<RandomEffectDefinition> g_random_effect_pool;
std::atomic<uint64_t> g_item_instance_id_counter{ 1 };
std::atomic<int> g_session_id_counter{ 1 };
int global_monster_id_counter = 1;

// --- Registries for Active Server State ---
std::map<std::string, PlayerBroadcastData> g_player_registry;
std::mutex g_player_registry_mutex;
std::map<std::string, std::weak_ptr<AsyncSession>> g_session_registry;
std::mutex g_session_registry_mutex;
std::unordered_map<std::string, AreaData> g_areas;


// --- Grid Definitions ---
const std::vector<std::vector<int>> OVERWORLD_GRID = {
    //    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 (Three trees)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20 (PATH)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> TOWN_GRID = {
    //    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 (Three trees)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20 (PATH)
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> TOWN2_GRID = {
    //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0}, // 1
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0}, // 2
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0}, // 3 (Windmill?)
        {0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0}, // 4
        {0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0}, // 5 (Big oak tree)
        {0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 6
        {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 7
        {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 8
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
        {0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0}, // 10
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 11
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 12 
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 13 
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 14 
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 15 
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 16
        {0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> TOWN3_GRID = {
    //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0 (River)
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 1 (River)
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 2 (River)
        {0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3 (Hut w/Water wheel connected)
        {0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
        {0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0}, // 5 (Top of trees)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0}, // 6
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0}, // 7
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0}, // 8
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0}, // 9
        {0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
        {0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0}, // 11
        {0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0}, // 12 
        {0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0}, // 13 
        {0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0}, // 14 
        {0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0}, // 15 
        {0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0}, // 16
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0}, // 20 (PATH) (Sign saying right is to the forest)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> RUINS_GRID = {
    //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
    {0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
    {0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13
    {0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0}, // 14
    {0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0}, // 15
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0}, // 16
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 21
};
const std::vector<std::vector<int>> FOREST_GRID = {

    //    The 1's on the edge are where the paths will lead to other sections of the forest

    //                                           (Paths)  
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
            {0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 1
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 2
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0}, // 3
            {0,0,0,1,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,1,1,1,0,0}, // 4
            {0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1,1,0,0}, // 5 
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0}, // 6
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0}, // 7                                                   
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 10 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 11 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 12 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0}, // 16
            {0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0}, // 17
            {0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,0,0}, // 18
            {0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0}, // 19
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0}, // 20
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> FOREST2_GRID = {

    //                                           (Paths)  
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
            {0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
            {0,0,0,1,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
            {0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7                                                   
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 10 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 11 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 12 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0}, // 16
            {0,0,1,1,1,0,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0}, // 17 (Goblin hut)
            {0,0,1,1,1,0,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0}, // 18
            {0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0}, // 19
            {0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0}, // 20
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> FOREST3_GRID = {

    //                                           (Paths)  
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
            {0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 1
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 2
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0}, // 3
            {0,0,0,1,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0}, // 4
            {0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0}, // 5 
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7                                                   
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 10 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 11 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 12 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0}, // 15 
            {0,0,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0}, // 16
            {0,0,1,1,1,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0}, // 17
            {0,0,1,1,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0}, // 18
            {0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0}, // 19
            {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> CAVES_GRID = {
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
            {0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0}, // 5 
            {0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 6
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 7
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 8
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 9
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 10
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 11
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> DESERT_GRID = {
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0
            {0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1}, // 1
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0}, // 3
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0}, // 4
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0}, // 5 (Teepee (1) to give you the quest)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0}, // 6
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0}, // 7
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
            {0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1}, // 20
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}  // 21
const std::vector<std::vector<int>> DESERT2_GRID = {
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0
            {1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0}, // 1
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
            {0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0}, // 19
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 20
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}  // 21
const std::vector<std::vector<int>> DESERT3_GRID = {
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0
            {0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0}, // 1
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1}, // 2
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1}, // 3
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 4
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 5 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 6
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 7
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 10 (Main Desert Golem Boss)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 11
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 12 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 15 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 16
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 17
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1}, // 18
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1}, // 19
            {1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1}, // 20
            {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}  // 21
}; const std::vector<std::vector<int>> SWAMP_GRID = {
        //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> SWAMP2_GRID = {
        //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> SWAMP3_GRID = {
        //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 5 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> SWAMP4_GRID = {
        //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 0
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 1
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 2
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 3
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 4
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 5 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 6
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 7
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 8 (House of the rogue)
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 9
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 10
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 11
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 12 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 13 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 14 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 15 
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 16
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 17
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 18
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 19
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}, // 20
                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1}  // 21
};
const std::vector<std::vector<int>> VOLCANO_GRID = {
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 1
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 2
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 3
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 4
            {0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0}, // 5 
            {0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0}, // 6
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 7
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 8
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 9
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 10
            {0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}, // 11
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> MOUNTAINS_GRID = {
    //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 1
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 2
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 3 (Background of other tall mountains)
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 4
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 5 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 6
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12                                             
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> MOUNTAINS2_GRID = {
    //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 1
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 2
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 3 (Background of other tall mountains)
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 4
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 5 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 6
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12                                             
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> MOUNTAINS3_GRID = {
    //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 0
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 1
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 2
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 3 (Background of other tall mountains)
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 4
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 5 
        {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, // 6
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 10
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 11
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 12                                             
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20 (PATH)
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};
const std::vector<std::vector<int>> MARKET_GRID = {

    //                                           (Paths)  
    //       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 0
            {0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 1
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, // 2
            {0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0}, // 3
            {0,0,0,1,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0}, // 4
            {0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0}, // 5 
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 6
            {0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 7                                                   
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 8
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 9
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 10 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 11 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1}, // 12 (Path)
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 13 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 14 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 15 
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 16
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 17
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 18
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 19
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // 20
            {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 21
};



const std::map<std::string, std::vector<DialogueLine>> g_dialogues = {
    {
        "MAYOR_WELCOME_DIALOGUE",
        {
            {"Mayor",  "Welcome to our town, traveler. We dont get many heroes these days.", "MAYOR"},
            {"Mayor",  "If youre looking for work, the guards at the gates always need help.", "MAYOR"},
            {"Mayor",  "Stay within the walls at night. The wilderness is unforgiving.",       "MAYOR"}
        }
    },
    {
        "OLD_MAN_LORE_DIALOGUE",
        {
            {"Old Man", "Ahh another soul chasing glory. Ive seen many like you.", "OLD_MAN"},
            {"Old Man", "The Caves to the north hide things better left undisturbed.", "OLD_MAN"},
            {"Old Man", "If you insist on going, at least bring a potion or two.", "OLD_MAN"}
        }
    },
    {
        "HUNTER_FOREST_DIALOGUE",
        {
            {"Hunter", "Keep your eyes open. The forest is noisy when its safe", "HUNTER"},
            {"Hunter", "When it goes quiet? Thats when something is hunting you.", "HUNTER"}
        }
    },
    {
        "HERMIT_CAVE_DIALOGUE",
        {
            {"Hermit", "Footsteps echo strange in these caves.", "HERMIT"},
            {"Hermit", "Treasure? Maybe. Teeth and claws? Definitely.", "HERMIT"}
        }
    },
    {
        "ARCHAEOLOGIST_RUINS_DIALOGUE",
        {
            {"Archaeologist", "These ruins predate the town by centuries.", "ARCHAEOLOGIST"},
            {"Archaeologist", "If you find any strange relics, bring them to me.", "ARCHAEOLOGIST"}
        }
    },

    // add more here :D
};

std::unordered_map<std::string, SkillDefinition> g_skill_defs;

void initialize_skill_definitions() {
    g_skill_defs.clear();

    // Wizard: Ignite  INT-based nuke + Burn
    g_skill_defs["Ignite"] = SkillDefinition{
        "Ignite",
        SkillClass::WIZARD,
        15,                    // manaCost
        2,                     // cooldownTurns (not used yet)
        SkillTarget::ENEMY,    // target

        // scaling: STR, DEX, INT, flatDamage
        0.0f, 0.0f, 1.2f, 5.0f,

        // status: BURN for 2 turns, 5 dmg per tick (we'll tick later)
        true,
        StatusType::BURN,
        5,
        2,

        false,                 // isDefensive
        true                   // isMagic
    };

    // Rogue: BloodStrike  DEX-heavy + Bleed
    g_skill_defs["BloodStrike"] = SkillDefinition{
        "BloodStrike",
        SkillClass::ROGUE,
        10,
        2,
        SkillTarget::ENEMY,

        // a bit STR, heavy DEX
        0.2f, 1.3f, 0.0f, 0.0f,

        true,
        StatusType::BLEED,
        4,   // bleed per turn
        2,   // 2 turns

        false,
        false
    };

    // Warrior: ShieldWall  self-buff DEF_UP
    g_skill_defs["ShieldWall"] = SkillDefinition{
        "ShieldWall",
        SkillClass::WARRIOR,
        10,
        3,
        SkillTarget::SELF,

        0.0f, 0.0f, 0.0f, 0.0f,

        true,
        StatusType::DEFENSE_UP,
        15,  // +15 defense
        2,   // 2 turns

        true,
        false
    };
}

void initializeAreas() {
std::cout << "[Init] Starting scalable area initialization..." << std::endl;

//  Step 1: Define all base maps
struct TempArea {
    std::string name;
    std::string bg;
    const std::vector<std::vector<int>>* grid;
};

std::vector<TempArea> areaTemplates = {
    {"TOWN", "/town.png", &TOWN_GRID},
    {"FOREST", "/forest.png", &FOREST_GRID},
    {"VOLCANO", "/volcano.png", &VOLCANO_GRID},
    {"OVERWORLD", "/overworld.png", &OVERWORLD_GRID},
    {"CAVES", "/caves.png", &CAVES_GRID},
    {"RUINS", "/ruins.png", &RUINS_GRID},
    {"SWAMP", "/swamp.png", &SWAMP_GRID},
    {"MOUNTAINS", "/mountains.png", &MOUNTAINS_GRID},
    {"DESERT", "/desert.png", &DESERT_GRID},

    // Assuming these are variants or future areas
    {"TOWN2", "/town.png", &TOWN2_GRID},
    {"TOWN3", "/town.png", &TOWN3_GRID},
    {"FOREST2", "/forest.png", &FOREST2_GRID},
    {"FOREST3", "/forest.png", &FOREST3_GRID},

    {"MARKET", "/market.png", &MARKET_GRID}
};

//  Step 2: Populate base data
for (const auto& base : areaTemplates) {
    AreaData area;
    area.name = base.name;
    area.backgroundImage = base.bg;
    area.grid = base.grid;

    // attach interactables automatically
    auto it = g_interactable_objects.find(base.name);
    if (it != g_interactable_objects.end()) {
        area.interactables = it->second;
    }

    g_areas[base.name] = area;
}

//  Step 3: Add zone transitions (bi-directional example)
g_areas["TOWN"].monsters = {
    // Town is safe, no monsters.
};

g_areas["OVERWORLD"].monsters = {
    // Overworld is safe, no monsters.
};

g_areas["FOREST"].monsters = {
    {global_monster_id_counter++, "SLIME", 12, 8, 2, 4},
    {global_monster_id_counter++, "WOLF", 20, 12, 1, 3},
    {global_monster_id_counter++, "GOBLIN_PEON", 5, 5, 1, 3},
    {global_monster_id_counter++, "FOREST_SPRITE", 10, 15, 2, 5},
    {global_monster_id_counter++, "GIANT_SPIDER", 25, 18, 1, 1}, // <-- Fixed: space
    {global_monster_id_counter++, "TREANT", 28, 5, 1, 1}        // <-- Added
};

g_areas["VOLCANO"].monsters = {
    {global_monster_id_counter++, "LAVA_ELEMENTAL", 10, 10, 2, 3},
    {global_monster_id_counter++, "ORC_BRUTE", 15, 15, 1, 2},    // <-- Fixed: space
    {global_monster_id_counter++, "OGRE_WARRIOR", 25, 8, 1, 1},
    {global_monster_id_counter++, "BAT", 5, 5, 2, 4},
    {global_monster_id_counter++, "ORC_SCOUT", 18, 5, 1, 3}       // <-- Added
};

// --- Adding monsters for the other zones ---

g_areas["CAVES"].monsters = {
    {global_monster_id_counter++, "BAT", 5, 5, 3, 6},
    {global_monster_id_counter++, "KOBOLD", 10, 10, 2, 4},
    {global_monster_id_counter++, "CAVE_CRAB", 15, 15, 1, 3},
    {global_monster_id_counter++, "GIANT_SPIDER", 20, 18, 1, 2}, // <-- Fixed: space
    {global_monster_id_counter++, "SLIME", 22, 5, 2, 3},
    {global_monster_id_counter++, "ROCK_GOLEM", 25, 10, 1, 1}     // <-- Added
};

g_areas["RUINS"].monsters = {
    {global_monster_id_counter++, "SKELETON", 8, 8, 2, 5},
    {global_monster_id_counter++, "UNDEAD_GUARD", 12, 15, 1, 3},
    {global_monster_id_counter++, "GOBLIN_SHAMAN", 20, 10, 1, 1},
    {global_monster_id_counter++, "DARK_WIZARD", 25, 5, 1, 1},
    {global_monster_id_counter++, "BAT", 30, 18, 2, 5},
    {global_monster_id_counter++, "GIANT_RAT", 10, 18, 2, 5},     // <-- Added
    {global_monster_id_counter++, "NECROMANCER", 3, 3, 1, 1}      // <-- Added
};

g_areas["SWAMP"].monsters = {
    {global_monster_id_counter++, "SWAMP_THING", 10, 12, 2, 4},
    {global_monster_id_counter++, "SLIME", 15, 15, 3, 5},
    {global_monster_id_counter++, "GIANT_SPIDER", 5, 5, 1, 2},   // <-- Fixed: space
    {global_monster_id_counter++, "BAT", 8, 18, 2, 4},
    {global_monster_id_counter++, "KOBOLD", 12, 10, 1, 3}        // <-- Added
};

g_areas["MOUNTAINS"].monsters = {
    {global_monster_id_counter++, "ROCK_GOLEM", 10, 10, 1, 2},
    {global_monster_id_counter++, "HARPY", 15, 5, 2, 4},
    {global_monster_id_counter++, "ORC_SCOUT", 20, 15, 1, 3},
    {global_monster_id_counter++, "GRIFFIN", 25, 8, 1, 1},
    {global_monster_id_counter++, "WYVERN", 30, 5, 1, 1}         // <-- Added
};

g_areas["DESERT"].monsters = {
    {global_monster_id_counter++, "GIANT_SCORPION", 10, 10, 1, 3},
    {global_monster_id_counter++, "KOBOLD", 18, 15, 2, 4},
    {global_monster_id_counter++, "HARPY", 25, 5, 1, 2},
    {global_monster_id_counter++, "SKELETON", 15, 18, 2, 4},
    {global_monster_id_counter++, "MINOTAUR", 28, 12, 1, 1}      // <-- Added
};

//  Step 5: Validate zone targets & clean up
std::set<std::string> validAreas;
for (const auto& kv : g_areas)
validAreas.insert(kv.first);

for (auto& [name, area] : g_areas) {
    std::vector<ZoneTransition> validZones;
    for (const auto& z : area.zones) {
        if (validAreas.count(z.targetArea))
            validZones.push_back(z);
        else
            std::cerr << "[Warning] Zone from " << name
            << " points to invalid area '" << z.targetArea << "'\n";
    }
    area.zones = std::move(validZones);
}

//  Step 6: Merge interactables with zone logic
for (auto& [name, area] : g_areas) {
    if (g_interactable_objects.count(name)) {
        for (const auto& obj : g_interactable_objects.at(name))
            area.interactables.push_back(obj);
    }

    // automatically add zone transitions as interactables
    for (const auto& z : area.zones) {
        InteractableObject zoneObj{
            name + "_TO_" + z.targetArea,
            InteractableType::ZONE_TRANSITION,
            {z.x, z.y},
            z.targetArea
        };
        area.interactables.push_back(zoneObj);
    }
}

//  Step 7: Validate monsters exist in template
  for (auto& [name, area] : g_areas) {
    for (const auto& m : area.monsters) {
        if (MONSTER_TEMPLATES.find(m.name) == MONSTER_TEMPLATES.end()) {
            std::cerr << "[Warning] Area '" << name
                << "' references undefined monster type '" << m.name << "'\n";
        }
    }
}

std::cout << "[Init] Finished building " << g_areas.size()
<< " areas with full data integration." << std::endl;
}
// Monster Templates (Type, AssetKey)
const std::map<std::string, std::string> MONSTER_ASSETS = {
    {"SLIME", "SLM"}, {"GOBLIN", "GB"}, {"WOLF", "WLF"}, {"BAT", "BAT"},
    {"SKELETON", "SKL"}, {"GIANT SPIDER", "SPDR"}, {"ORC BRUTE", "ORC"},

    // --- Easy Monsters ---
    {"GIANT_RAT", "RAT"}, {"KOBOLD", "KBLD"}, {"SWAMP_THING", "SWMP"},
    {"FOREST_SPRITE", "SPRT"}, {"CAVE_CRAB", "CRB"}, {"GOBLIN_PEON", "GBP"},

    // --- Medium Monsters ---
    {"GOBLIN_SHAMAN", "GBSH"}, {"ORC_SCOUT", "ORCS"}, {"UNDEAD_GUARD", "UDG"},
    {"GIANT_SCORPION", "SCRP"}, {"HARPY", "HRPY"}, {"ROCK_GOLEM", "GLM"},
    {"DARK_WIZARD", "DKWZ"}, {"TREANT", "TRNT"},

    // --- Hard Monsters ---
    {"OGRE_WARRIOR", "OGRE"}, {"LAVA_ELEMENTAL", "LAVA"}, {"GRIFFIN", "GRFN"},
    {"MINOTAUR", "MNTR"}, {"NECROMANCER", "NECRO"}, {"WYVERN", "WYV"}
};

// Map of area names to their grid data
const std::map<std::string, std::vector<std::vector<int>>> g_area_grids = {
    {"TOWN", TOWN_GRID},
    {"TOWN2", TOWN_GRID},
    {"TOWN3", TOWN_GRID},
    {"FOREST", FOREST_GRID},
    {"FOREST2", FOREST_GRID},
    {"FOREST3", FOREST_GRID},
    {"CAVES", CAVES_GRID},
    {"RUINS", RUINS_GRID},
    {"DESERT", DESERT_GRID},
    {"SWAMP", SWAMP_GRID },
    {"VOLCANO", VOLCANO_GRID },
    {"MOUNTAINS", MOUNTAINS_GRID},
    { "OVERWORLD", OVERWORLD_GRID},

};

// Monster Templates
// Constructor: MonsterInstance(id, type, assetKey, health, def, speed, str, dex, int, lck, xp, L_Tier, D_Chance)
const std::map<std::string, MonsterInstance> MONSTER_TEMPLATES = {
    {"SLIME", MonsterInstance(0, "SLIME", "SLM", 30, 5, 5, 5, 3, 1, 3, 10, 0, 50)},
    {"GOBLIN", MonsterInstance(0, "GOBLIN", "GB", 50, 8, 8, 8, 7, 3, 5, 15, 1, 25)},
    {"WOLF", MonsterInstance(0, "WOLF", "WLF", 40, 6, 12, 10, 12, 2, 5, 12, 0, 15)},
    {"BAT", MonsterInstance(0, "BAT", "BAT", 20, 4, 15, 4, 12, 1, 6, 8, -1, 0)},
    {"SKELETON", MonsterInstance(0, "SKELETON", "SKL", 60, 10, 6, 12, 8, 3, 2, 20, 1, 10)},
    {"GIANT_SPIDER", MonsterInstance(0, "GIANT_SPIDER", "SPDR", 70, 8, 10, 13, 10, 2, 5, 25, 1, 15)}, // <-- FIX
    {"ORC_BRUTE", MonsterInstance(0, "ORC_BRUTE", "ORC", 100, 12, 5, 18, 6, 2, 3, 40, 2, 5)},      // <-- FIX

    // --- Easy Monsters ---
    {"GIANT_RAT", MonsterInstance(0, "GIANT_RAT", "RAT", 25, 4, 10, 6, 8, 1, 8, 9, 0, 20)},
    {"KOBOLD", MonsterInstance(0, "KOBOLD", "KBLD", 35, 6, 9, 7, 7, 2, 5, 11, 0, 25)},
    {"SWAMP_THING", MonsterInstance(0, "SWAMP_THING", "SWMP", 60, 5, 3, 9, 2, 1, 2, 12, 0, 30)},
    {"FOREST_SPRITE", MonsterInstance(0, "Forest Sprite", "SPRT", 15, 2, 18, 2, 15, 8, 10, 10, 0, 15)},
    {"CAVE_CRAB", MonsterInstance(0, "Cave Crab", "CRB", 40, 12, 5, 8, 5, 1, 3, 13, 0, 10)},
    {"GOBLIN_PEON", MonsterInstance(0, "Goblin Peon", "GBP", 40, 7, 7, 7, 6, 2, 4, 13, 0, 15)},

    // --- Medium Monsters ---
    {"GOBLIN_SHAMAN", MonsterInstance(0, "Goblin Shaman", "GBSH", 60, 8, 8, 5, 8, 15, 7, 30, 2, 10)},
    {"ORC_SCOUT", MonsterInstance(0, "Orc Scout", "ORCS", 80, 10, 14, 13, 15, 3, 6, 35, 1, 15)},
    {"UNDEAD_GUARD", MonsterInstance(0, "Undead Guard", "UDG", 110, 15, 4, 16, 6, 2, 1, 40, 1, 20)},
    {"GIANT_SCORPION", MonsterInstance(0, "Giant Scorpion", "SCRP", 90, 12, 10, 15, 10, 2, 5, 45, 1, 15)},
    {"HARPY", MonsterInstance(0, "Harpy", "HRPY", 70, 7, 18, 12, 18, 6, 8, 42, 1, 15)},
    {"ROCK_GOLEM", MonsterInstance(0, "Rock Golem", "GLM", 150, 25, 2, 20, 3, 1, 2, 60, 2, 5)},
    {"DARK_WIZARD", MonsterInstance(0, "Dark Wizard", "DKWZ", 80, 9, 10, 6, 10, 22, 7, 55, 2, 10)},
    {"TREANT", MonsterInstance(0, "Treant", "TRNT", 180, 14, 3, 22, 4, 8, 4, 65, 2, 10)},

    // --- Hard Monsters ---
    {"OGRE_WARRIOR", MonsterInstance(0, "Ogre Warrior", "OGRE", 250, 18, 4, 28, 6, 3, 3, 100, 2, 20)},
    {"LAVA_ELEMENTAL", MonsterInstance(0, "Lava Elemental", "LAVA", 160, 15, 8, 20, 10, 18, 5, 110, 3, 25)},
    {"GRIFFIN", MonsterInstance(0, "Griffin", "GRFN", 200, 16, 16, 25, 20, 8, 10, 150, 3, 10)},
    {"MINOTAUR", MonsterInstance(0, "Minotaur", "MNTR", 300, 20, 6, 35, 8, 2, 4, 180, 3, 15)},
    {"NECROMANCER", MonsterInstance(0, "Necromancer", "NECRO", 180, 14, 10, 10, 12, 30, 8, 160, 3, 15)},
    {"WYVERN", MonsterInstance(0, "Wyvern", "WYV", 280, 18, 15, 30, 18, 10, 7, 200, 4, 20)}
};

// List of keys for random monster generation
const std::vector<std::string> MONSTER_KEYS = {
    "SLIME", "GOBLIN", "WOLF", "BAT", "SKELETON", "GIANT SPIDER", "ORC BRUTE",
    "GIANT_RAT", "KOBOLD", "SWAMP_THING", "FOREST_SPRITE", "CAVE_CRAB", "GOBLIN_PEON",
    "GOBLIN_SHAMAN", "ORC_SCOUT", "UNDEAD_GUARD", "GIANT_SCORPION", "HARPY", "ROCK_GOLEM",
    "DARK_WIZARD", "TREANT", "OGRE_WARRIOR", "LAVA_ELEMENTAL", "GRIFFIN",
    "MINOTAUR", "NECROMANCER", "WYVERN"
};
void initialize_suffix_pools() {
    // TIER 12: Common / Uncommon Stat Boosts
    g_effect_suffix_pools["STRENGTH_EFFECT"] = {
        "of Power", "of the Bear", "of Might", "of Brawn", "of Titans", "of Crushing Force"
    };
    g_effect_suffix_pools["METAL_EFFECT"] = {
        "of Iron", "of Steel", "of the Shield", "of Fortification", "of the Bulwark", "of Resilience"
    };
    g_effect_suffix_pools["WIND_EFFECT"] = {
        "of Swiftness", "of the Gale", "of Quickness", "of the Wind", "of Velocity", "of Zephyr"
    };
    g_effect_suffix_pools["LIFE_EFFECT"] = {
        "of Vitality", "of Health", "of the Heart", "of Endurance", "of Life", "of Renewal"
    };
    g_effect_suffix_pools["ARCANE_EFFECT"] = {
        "of the Arcane", "of Mana", "of Magic", "of the Sage", "of the Mind", "of Mysticism"
    };
    g_effect_suffix_pools["BLESSING_EFFECT"] = {
        "of Fortune", "of the Lucky", "of Providence", "of Favor", "of Blessing", "of Destiny"
    };
    g_effect_suffix_pools["PSYCHIC_EFFECT"] = {
        "of Intellect", "of the Mind", "of Insight", "of Wisdom", "of Perception", "of the Thinker"
    };
    g_effect_suffix_pools["NATURE_EFFECT"] = {
        "of the Wolf", "of Agility", "of the Cat", "of Dexterity", "of the Wilds", "of Fleetness"
    };
    g_effect_suffix_pools["SAND_EFFECT"] = {
        "of the Dunes", "of the Desert", "of Enduring Earth", "of Still Resolve", "of Dust", "of Grit"
    };
    g_effect_suffix_pools["SOUND_EFFECT"] = {
        "of Echoes", "of Resonance", "of the Voice", "of Harmony", "of the Song", "of Vibration"
    };

    // Dual Stats / Elemental (Tier 2)
    g_effect_suffix_pools["EARTH_EFFECT"] = {
        "of the Mountain", "of Stone", "of the Earthshaker", "of Stability", "of Rock", "of Grounded Will"
    };
    g_effect_suffix_pools["WATER_EFFECT"] = {
        "of the Tide", "of Flowing Life", "of the Stream", "of the Deep", "of Rejuvenation", "of Healing Waters"
    };
    g_effect_suffix_pools["BURN_EFFECT"] = {
        "of Flames", "of the Inferno", "of Burning Passion", "of Fire", "of Ember", "of Scorching Heat"
    };
    g_effect_suffix_pools["ICE_EFFECT"] = {
        "of Frost", "of the Blizzard", "of the Glacier", "of Frozen Time", "of Chill", "of Hoarfrost"
    };
    g_effect_suffix_pools["LIGHTNING_EFFECT"] = {
        "of Sparks", "of Storms", "of the Thunder", "of Static Energy", "of Voltage", "of Charged Power"
    };
    g_effect_suffix_pools["POISON_EFFECT"] = {
        "of Venom", "of the Serpent", "of Toxicity", "of the Viper", "of Noxious Bite", "of Corruption"
    };
    g_effect_suffix_pools["ACID_EFFECT"] = {
        "of Corrosion", "of the Ooze", "of Decay", "of Dissolution", "of Acid", "of the Slime"
    };
    g_effect_suffix_pools["BLOOM_EFFECT"] = {
        "of Growth", "of the Grove", "of Natures Touch", "of Blossoms", "of Renewal", "of Blooming Life"
    };

    // Tier 3: Rare / Curses / Utility Spells
    g_effect_suffix_pools["FIRE_EFFECT"] = {
        "of Flames", "of Emberheart", "of Passion", "of Burning Spirit", "of Pyromancy", "of the Phoenix"
    };
    g_effect_suffix_pools["HOLY_EFFECT"] = {
        "of Light", "of Radiance", "of the Paladin", "of Sanctity", "of Faith", "of Divine Grace"
    };
    g_effect_suffix_pools["BLOOD_EFFECT"] = {
        "of Bloodlust", "of the Berserker", "of Crimson Power", "of the Sanguine", "of Hemomancy", "of Sacrifice"
    };
    g_effect_suffix_pools["CURSE_EFFECT"] = {
        "of Curses", "of Misfortune", "of Shadows", "of the Hex", "of Malevolence", "of the Witch"
    };
    g_effect_suffix_pools["DREAM_EFFECT"] = {
        "of Dreams", "of Slumber", "of Illusion", "of Reverie", "of the Sleeper", "of Nightfall"
    };
    g_effect_suffix_pools["FEAR_EFFECT"] = {
        "of Terror", "of Dread", "of Horror", "of Panic", "of the Abyss", "of Nightmares"
    };
    g_effect_suffix_pools["SHADOW_EFFECT"] = {
        "of Shadows", "of Invisibility", "of the Nightblade", "of Cloaked Veil", "of Stealth", "of the Phantom"
    };

    // Tier 4: Epic  Strong Stats & Spells
    g_effect_suffix_pools["ORDER_EFFECT"] = {
        "of Order", "of Balance", "of Harmony", "of Equilibrium", "of Unity", "of the Trinity"
    };
    g_effect_suffix_pools["LAVA_EFFECT"] = {
        "of the Volcano", "of Molten Fury", "of Lavaflow", "of Burning Earth", "of Magma", "of Fiery Depths"
    };
    g_effect_suffix_pools["DEATH_EFFECT"] = {
        "of Death", "of the Lich", "of Decay", "of the Grave", "of Necrosis", "of Eternal Sleep"
    };
    g_effect_suffix_pools["PLAGUE_EFFECT"] = {
        "of Pestilence", "of the Plague", "of Blight", "of Corruption", "of Disease", "of Rot"
    };

    // Tier 5: Legendary  Ultimate Power
    g_effect_suffix_pools["CELESTIAL_EFFECT"] = {
        "of the Heavens", "of Celestial Light", "of the Cosmos", "of the Archon", "of Radiance", "of Divinity"
    };
    g_effect_suffix_pools["CREATION_EFFECT"] = {
        "of Creation", "of Genesis", "of Primordial Power", "of the Maker", "of Birth", "of Formation"
    };
    g_effect_suffix_pools["DESTRUCTION_EFFECT"] = {
        "of Destruction", "of Cataclysm", "of Annihilation", "of Doom", "of the End", "of Obliteration"
    };
    g_effect_suffix_pools["TIME_EFFECT"] = {
        "of Time", "of the Hourglass", "of Eternity", "of Chronos", "of Paradox", "of Ages"
    };
    g_effect_suffix_pools["GRAVITY_EFFECT"] = {
        "of Gravity", "of the Black Hole", "of Crushing Force", "of Singularity", "of Mass", "of the Void Pull"
    };
    g_effect_suffix_pools["VOID_EFFECT"] = {
        "of the Void", "of Nothingness", "of Oblivion", "of the Abyss", "of Emptiness", "of Dark Matter"
    };
    g_effect_suffix_pools["PLASMA_EFFECT"] = {
        "of the Starfire", "of Plasma", "of Ion Storms", "of Fusion", "of Radiant Heat", "of Stellar Flame"
    };
    g_effect_suffix_pools["CHAOS_EFFECT"] = {
        "of Chaos", "of Entropy", "of Anarchy", "of Wild Magic", "of Disorder", "of Pandemonium"
    };
}

//const std::map<int, std::vector<std::string>> g_loot_tables = {
//    {
//        // Tier 0: Trash
//        0, {
//            "RUSTY_SWORD", "WET_SHIRT", "BROKEN_SANDALS", "DULL_AXE", "BENT_DAGGER",
//            "SPLINTERED_STICK", "SOILED_TROUSERS", "BARELY_BOOTS", "CRACKED_WAND"
//        }
//    },
//    {
//        // Tier 1: Basic Starter
//        1, {
//            "WORN_LEATHER_CAP", "TORN_SHIRT", "PATCHED_PANTS", "FLIMSY_SANDALS",
//            "CLOTH_CAP", "LEAKY_HELMET", "MOTH_EATEN_CLOAK", "LOINCLOTH",
//            "PEASANTS_HAT", "OLD_FARMERS_SHIRT", "ROUGHSPUN_PANTS"
//        }
//    },
//    {
//        // Tier 2: Common - Light & Caster
//        2, {
//            "LEATHER_COWL", "LEATHER_TUNIC", "LEATHER_PANTS", "SOFT_LEATHER_BOOTS",
//            "OAK_STAFF", "POINTY_HAT", "SIMPLE_ROBE", "CLOTH_TROUSERS",
//            "ENCHANTED_SANDALS", "APPRENTICES_GRIMOIRE", "FEATHERED_CAP",
//            "APPRENTICES_ROBE", "HIKING_BOOTS"
//        }
//    },
//    {
//        // Tier 3: Common - Heavy & Martial
//        3, {
//            "IRON_BROADSWORD", "IRON_HELMET", "CHAINMAIL_SHIRT", "IRON_GREAVES",
//            "STEEL_BOOTS", "STEEL_DAGGER", "IRON_SPEAR", "HEAVY_IRON_HELM",
//            "QUILTED_ARMOR", "STURDY_BREECHES", "CHAINMAIL_LEGGINGS",
//            "HEAVY_STEEL_BOOTS"
//        }
//    },
//    {
//        // Tier 4: Mid-Grade - Warrior
//        4, {
//            "KNIGHTS_GREATHELM", "TITANIUM_PLATEBODY", "BERSERKERS_AXE",
//            "WARHAMMER_OF_THE_ZEALOT", "OBSIDIAN_MACE", "BARBARIAN_WARHELM",
//            "SPIKED_PLATE_ARMOR", "PLATE_LEGGINGS_OF_THE_GUARDIAN",
//            "SABATONS_OF_THE_BERSERKER", "EXECUTIONERS_AXE", "KNIGHTS_CUIRASS",
//            "PLATE_LEGGINGS"
//        }
//    },
//    {
//        // Tier 5: Mid-Grade - Rogue
//        5, {
//            "ASSASSINS_MASK", "SHADOW_LEATHER_CHAPS", "POISONED_STILETTO",
//            "TRICKSTERS_CAP", "PHANTOM_CLOAK", "SILKEN_SLIPPERS", "JESTERS_TIGHTS",
//            "RAPIER_OF_THE_DUELIST", "ROGUES_LEGGINGS", "BOOTS_OF_THE_EXPLORER"
//        }
//    },
//    {
//        // Tier 6: Mid-Grade - Mage
//        6, {
//            "ARCHMAGE_CIRCLET", "ROBES_OF_THE_SCHOLAR", "CRYSTAL_TOME",
//            "GOGGLES_OF_PERCEPTION", "DRUIDS_RAIMENT", "MAGES_BREECHES",
//            "BOOTS_OF_THE_SCHOLAR", "WIZARD_HAT_OF_THE_OWL"
//        }
//    },
//    {
//        // Tier 7: Unique - Hybrid & Positive
//        7, {
//            "BATTLEMAGE_PLATE", "SPELLTHIEF_GLOVES", "SWASHBUCKLERS_BOOTS",
//            "CROWN_OF_COMMAND", "RUNE_BLADE", "SCEPTER_OF_THE_PRIEST",
//            "ROBE_OF_THE_CHAMELEON", "MANTLE_OF_THE_MAGMA", "BARBED_ARMOR",
//            "PANTS_OF_THE_GIANT", "GREAVES_OF_THE_WIND", "POISONERS_PANTS",
//            "BOOTS_OF_THE_STAMPEDE", "MAGES_SHOES", "KILT_OF_THE_HIGHLANDER"
//        }
//    },
//    {
//        // Tier 8: Unique - Gambit & Specialty
//        8, {
//            "HELM_OF_THE_GAMBLER", "CLOAK_OF_MISFORTUNE", "BOOTS_OF_BLINDING_SPEED",
//            "PANTS_OF_THE_TITAN", "ROBE_OF_THE_ARCHLICH", "RABBITS_FOOT_AMULET",
//            "PLAGUE_DOCTOR_MASK", "HARLEQUIN_VEST", "GOBLIN_ROCKET_BOOTS",
//            "BLOODTHIRSTY_BLADE", "FROZEN_WAND", "FOOLS_DAGGER",
//            "HELM_OF_THE_SLEEPLESS", "JUGGERNAUTS_VISAGE", "CROWN_OF_THE_FALSE_KING",
//            "LUCKY_PANTS", "FLOATING_SHOES", "BOOTS_OF_THE_GAMBLER", "SILK_PANTS",
//            "SORCERERS_SKIRT"
//        }
//    },
//    {
//        // Tier 9: Legendary
//        9, {
//            "VOIDWALKER_BOOTS", "ETHEREAL_BLADE", "PHOENIX_HELM", "MASK_OF_THE_SHADOW",
//            "FOUNDATION_GREAVES", "HERMES_SANDALS", "COLOSSUS_TREADS"
//        }
//    },
//    {
//        // Tier 10: Mythic
//        10, {
//            "DRAGONSCALE_MAIL", "HEARTSEEKER_BOW", "STAFF_OF_THE_COSMOS",
//            "CELESTIAL_RAIMENT", "TITANS_PLATE", "VOIDWALKER_LEGGINGS", "INFINITY_EDGE"
//        }
//    },
//    {
//        // Special Tier 99: Consumables
//        99, {
//            "SMALL_HEALTH_POTION", "LARGE_HEALTH_POTION", "SMALL_MANA_POTION",
//            "LARGE_MANA_POTION", "ELIXIR_OF_SPEED", "ELIXIR_OF_GIANTS_STRENGTH"
//        }
//    }
//};

// --- Define the item database ---
std::map<std::string, ItemDefinition> itemDatabase;

void initialize_item_database() {
    ItemDefinition def;

    // --- Tier 0: "Bad" / Starter Items (20 Items) ---
    def = {};
    def.id = "RUSTY_SWORD";
    def.name = "Rusty Sword";
    def.description = "Barely holds an edge.";
    def.imagePath = "RUSTY_SWORD"; // Using ID as placeholder
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"strength", 1}, {"speed", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "WORN_LEATHER_CAP";
    def.name = "Worn Leather Cap";
    def.description = "Thin and cracked.";
    def.imagePath = "WORN_LEATHER_CAP";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "TORN_SHIRT";
    def.name = "Torn Shirt";
    def.description = "Better than nothing. Maybe.";
    def.imagePath = "TORN_SHIRT";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PATCHED_PANTS";
    def.name = "Patched Pants";
    def.description = "Very drafty.";
    def.imagePath = "PATCHED_PANTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "FLIMSY_SANDALS";
    def.name = "Flimsy Sandals";
    def.description = "Your toes are exposed.";
    def.imagePath = "FLIMSY_SANDALS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"speed", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CRACKED_WAND";
    def.name = "Cracked Wand";
    def.description = "Splinters and leaks mana.";
    def.imagePath = "CRACKED_WAND";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"intellect", 1}, {"maxMana", -5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BENT_DAGGER";
    def.name = "Bent Dagger";
    def.description = "Hard to get a good grip.";
    def.imagePath = "BENT_DAGGER";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"dexterity", 1}, {"strength", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SPLINTERED_STICK";
    def.name = "Splintered Stick";
    def.description = "A weapon of last resort.";
    def.imagePath = "SPLINTERED_STICK";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"strength", 1}, {"defense", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CLOTH_CAP";
    def.name = "Cloth Cap";
    def.description = "Keeps the sun off, but not much else.";
    def.imagePath = "CLOTH_CAP";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "WET_SHIRT";
    def.name = "Wet Shirt";
    def.description = "It's damp and uncomfortable.";
    def.imagePath = "WET_SHIRT";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1}, {"speed", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SOILED_TROUSERS";
    def.name = "Soiled Trousers";
    def.description = "Embarrassing.";
    def.imagePath = "SOILED_TROUSERS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1}, {"luck", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BROKEN_SANDALS";
    def.name = "Broken Sandals";
    def.description = "The strap is gone.";
    def.imagePath = "BROKEN_SANDALS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"speed", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "DULL_AXE";
    def.name = "Dull Axe";
    def.description = "Might be better for chopping wood.";
    def.imagePath = "DULL_AXE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"strength", 2}, {"speed", -3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LEAKY_HELMET";
    def.name = "Leaky Helmet";
    def.description = "Water drips in.";
    def.imagePath = "LEAKY_HELMET";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 2}, {"luck", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "MOTH_EATEN_CLOAK";
    def.name = "Moth-Eaten Cloak";
    def.description = "More holes than fabric.";
    def.imagePath = "MOTH_EATEN_CLOAK";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1}, {"dexterity", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LOINCLOTH";
    def.name = "Loincloth";
    def.description = "The pinnacle of basic.";
    def.imagePath = "LOINCLOTH";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BARELY_BOOTS";
    def.name = "Barely Boots";
    def.description = "Soles held on with twine.";
    def.imagePath = "BARELY_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 1}, {"speed", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PEASANTS_HAT";
    def.name = "Peasant's Hat";
    def.description = "A simple straw hat.";
    def.imagePath = "PEASANTS_HAT";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"luck", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "OLD_FARMERS_SHIRT";
    def.name = "Old Farmer's Shirt";
    def.description = "Smells faintly of soil.";
    def.imagePath = "OLD_FARMERS_SHIRT";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"maxHealth", 5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ROUGHSPUN_PANTS";
    def.name = "Roughspun Pants";
    def.description = "Itchy.";
    def.imagePath = "ROUGHSPUN_PANTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 0; // TIER 0
    def.stats = { {"defense", 2}, {"speed", -1} };
    itemDatabase[def.id] = def;

    // --- Tier 1: Common Items (25 Items) ---
    def = {};
    def.id = "IRON_BROADSWORD";
    def.name = "Iron Broadsword";
    def.description = "A reliable steel blade.";
    def.imagePath = "IRON_BROADSWORD";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"strength", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "IRON_HELMET";
    def.name = "Iron Helmet";
    def.description = "Good, solid head protection.";
    def.imagePath = "IRON_HELMET";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 5}, {"maxHealth", 10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CHAINMAIL_SHIRT";
    def.name = "Chainmail Shirt";
    def.description = "A standard chestpiece for any warrior.";
    def.imagePath = "CHAINMAIL_SHIRT";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 10}, {"speed", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "IRON_GREAVES";
    def.name = "Iron Greaves";
    def.description = "Sturdy leg protection.";
    def.imagePath = "IRON_GREAVES";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 7}, {"maxHealth", 5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "STEEL_BOOTS";
    def.name = "Steel Boots";
    def.description = "Heavy and protective.";
    def.imagePath = "STEEL_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 4}, {"speed", -3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "STEEL_DAGGER";
    def.name = "Steel Dagger";
    def.description = "Sharp and fast.";
    def.imagePath = "STEEL_DAGGER";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"dexterity", 4}, {"speed", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LEATHER_COWL";
    def.name = "Leather Cowl";
    def.description = "Keeps the wind out of your face.";
    def.imagePath = "LEATHER_COWL";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 2}, {"dexterity", 2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LEATHER_TUNIC";
    def.name = "Leather Tunic";
    def.description = "Flexible and light.";
    def.imagePath = "LEATHER_TUNIC";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 5}, {"dexterity", 3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LEATHER_PANTS";
    def.name = "Leather Pants";
    def.description = "Allows for quiet movement.";
    def.imagePath = "LEATHER_PANTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 3}, {"speed", 2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SOFT_LEATHER_BOOTS";
    def.name = "Soft Leather Boots";
    def.description = "Silent footsteps.";
    def.imagePath = "SOFT_LEATHER_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 1}, {"speed", 4} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "OAK_STAFF";
    def.name = "Oak Staff";
    def.description = "A simple focus for spells.";
    def.imagePath = "OAK_STAFF";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"intellect", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "POINTY_HAT";
    def.name = "Pointy Hat";
    def.description = "The classic wizard look.";
    def.imagePath = "POINTY_HAT";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"intellect", 2}, {"maxMana", 10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SIMPLE_ROBE";
    def.name = "Simple Robe";
    def.description = "Dyed a deep, arcane blue.";
    def.imagePath = "SIMPLE_ROBE";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 2}, {"intellect", 3}, {"maxMana", 15} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CLOTH_TROUSERS";
    def.name = "Cloth Trousers";
    def.description = "Comfortable for long hours of study.";
    def.imagePath = "CLOTH_TROUSERS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 1}, {"maxMana", 10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ENCHANTED_SANDALS";
    def.name = "Enchanted Sandals";
    def.description = "You feel a slight hum of energy.";
    def.imagePath = "ENCHANTED_SANDALS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"intellect", 1}, {"speed", 2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "IRON_SPEAR";
    def.name = "Iron Spear";
    def.description = "Good for keeping foes at a distance.";
    def.imagePath = "IRON_SPEAR";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"strength", 4}, {"dexterity", 2}, {"speed", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "APPRENTICES_GRIMOIRE";
    def.name = "Apprentice's Grimoire";
    def.description = "Contains basic incantations.";
    def.imagePath = "APPRENTICES_GRIMOIRE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"intellect", 4}, {"maxMana", 15} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HEAVY_IRON_HELM";
    def.name = "Heavy Iron Helm";
    def.description = "A thick, protective helmet.";
    def.imagePath = "HEAVY_IRON_HELM";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 6}, {"speed", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "FEATHERED_CAP";
    def.name = "Feathered Cap";
    def.description = "A jaunty cap with a long feather.";
    def.imagePath = "FEATHERED_CAP";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"dexterity", 2}, {"speed", 1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "QUILTED_ARMOR";
    def.name = "Quilted Armor";
    def.description = "Padded armor worn under chainmail.";
    def.imagePath = "QUILTED_ARMOR";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 8}, {"speed", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "APPRENTICES_ROBE";
    def.name = "Apprentice's Robe";
    def.description = "Slightly singed at the cuffs.";
    def.imagePath = "APPRENTICES_ROBE";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"intellect", 4}, {"maxMana", 10}, {"defense", 2} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "STURDY_BREECHES";
    def.name = "Sturdy Breeches";
    def.description = "Well-made trousers for travel.";
    def.imagePath = "STURDY_BREECHES";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 4} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CHAINMAIL_LEGGINGS";
    def.name = "Chainmail Leggings";
    def.description = "Protects the upper legs.";
    def.imagePath = "CHAINMAIL_LEGGINGS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 8}, {"speed", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HIKING_BOOTS";
    def.name = "Hiking Boots";
    def.description = "Made for long journeys.";
    def.imagePath = "HIKING_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"speed", 2}, {"defense", 2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HEAVY_STEEL_BOOTS";
    def.name = "Heavy Steel Boots";
    def.description = "Also known as Sabatons.";
    def.imagePath = "HEAVY_STEEL_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 1; // TIER 1
    def.stats = { {"defense", 7}, {"speed", -4} };
    itemDatabase[def.id] = def;

    // --- Tier 2: Mid-Grade / Specialization (30 Items) ---
    def = {};
    def.id = "KNIGHTS_GREATHELM";
    def.name = "Knight's Greathelm";
    def.description = "A fully enclosed helm for jousts and war.";
    def.imagePath = "KNIGHTS_GREATHELM";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 12}, {"maxHealth", 25}, {"intellect", -3} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "TITANIUM_PLATEBODY";
    def.name = "Titanium Platebody";
    def.description = "Lighter than steel, stronger than iron.";
    def.imagePath = "TITANIUM_PLATEBODY";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 22}, {"strength", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ASSASSINS_MASK";
    def.name = "Assassin's Mask";
    def.description = "Hides your identity and sharpens your senses.";
    def.imagePath = "ASSASSINS_MASK";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 8}, {"luck", 5}, {"speed", 2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SHADOW_LEATHER_CHAPS";
    def.name = "Shadow Leather Chaps";
    def.description = "Dyed black with nightshade.";
    def.imagePath = "SHADOW_LEATHER_CHAPS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 8}, {"dexterity", 10}, {"speed", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ARCHMAGE_CIRCLET";
    def.name = "Archmage's Circlet";
    def.description = "A silver band that hums with power.";
    def.imagePath = "ARCHMAGE_CIRCLET";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 12}, {"maxMana", 50}, {"maxHealth", -10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ROBES_OF_THE_SCHOLAR";
    def.name = "Robes of the Scholar";
    def.description = "Covered in runes of protection.";
    def.imagePath = "ROBES_OF_THE_SCHOLAR";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 6}, {"intellect", 10}, {"maxMana", 30} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BERSERKERS_AXE";
    def.name = "Berserker's Axe";
    def.description = "A heavy, unbalanced axe that loves to bite.";
    def.imagePath = "BERSERKERS_AXE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"strength", 20}, {"defense", -5}, {"speed", -3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "WARHAMMER_OF_THE_ZEALOT";
    def.name = "Warhammer of the Zealot";
    def.description = "A heavy hammer for smiting foes.";
    def.imagePath = "WARHAMMER_OF_THE_ZEALOT";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"strength", 12}, {"intellect", 5}, {"maxHealth", 15} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "OBSIDIAN_MACE";
    def.name = "Obsidian Mace";
    def.description = "A heavy mace carved from volcanic glass.";
    def.imagePath = "OBSIDIAN_MACE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"strength", 18}, {"speed", -5}, {"defense", 3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BARBARIAN_WARHELM";
    def.name = "Barbarian Warhelm";
    def.description = "Adorned with horns. Intimidating.";
    def.imagePath = "BARBARIAN_WARHELM";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"strength", 7}, {"maxHealth", 20}, {"intellect", -2} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SPIKED_PLATE_ARMOR";
    def.name = "Spiked Plate Armor";
    def.description = "Deals minor damage to attackers.";
    def.imagePath = "SPIKED_PLATE_ARMOR";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 25}, {"strength", 5}, {"speed", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PLATE_LEGGINGS_OF_THE_GUARDIAN";
    def.name = "Guardian's Plate Leggings";
    def.description = "Built to withstand a siege.";
    def.imagePath = "PLATE_LEGGINGS_OF_THE_GUARDIAN";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 20}, {"maxHealth", 30}, {"speed", -4} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SABATONS_OF_THE_BERSERKER";
    def.name = "Berserker's Sabatons";
    def.description = "For stomping, not for running.";
    def.imagePath = "SABATONS_OF_THE_BERSERKER";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"strength", 6}, {"defense", 6}, {"speed", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "POISONED_STILETTO";
    def.name = "Poisoned Stiletto";
    def.description = "A rogue's best friend.";
    def.imagePath = "POISONED_STILETTO";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 12}, {"luck", 7}, {"strength", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "TRICKSTERS_CAP";
    def.name = "Trickster's Cap";
    def.description = "Feathered and slightly ridiculous.";
    def.imagePath = "TRICKSTERS_CAP";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 5}, {"speed", 5}, {"luck", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PHANTOM_CLOAK";
    def.name = "Phantom Cloak";
    def.description = "You feel lighter, almost ethereal.";
    def.imagePath = "PHANTOM_CLOAK";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 10}, {"speed", 8}, {"defense", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SILKEN_SLIPPERS";
    def.name = "Silken Slippers";
    def.description = "For the nimble and the quiet.";
    def.imagePath = "SILKEN_SLIPPERS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 7}, {"speed", 7}, {"defense", -1} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "JESTERS_TIGHTS";
    def.name = "Jester's Tights";
    def.description = "Un-coordinated colors. Confuses the enemy.";
    def.imagePath = "JESTERS_TIGHTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"luck", 12}, {"speed", 6}, {"defense", -3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CRYSTAL_TOME";
    def.name = "Crystal Tome";
    def.description = "A book that reads itself aloud. (Weapon Slot)";
    def.imagePath = "CRYSTAL_TOME";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 15}, {"maxMana", 75}, {"defense", -3} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "GOGGLES_OF_PERCEPTION";
    def.name = "Goggles of Perception";
    def.description = "The lenses whirl and click.";
    def.imagePath = "GOGGLES_OF_PERCEPTION";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 7}, {"dexterity", 7} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "DRUIDS_RAIMENT";
    def.name = "Druid's Raiment";
    def.description = "Woven from living leaves and moonlight.";
    def.imagePath = "DRUIDS_RAIMENT";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 8}, {"maxHealth", 25}, {"maxMana", 25} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "MAGES_BREECHES";
    def.name = "Mage's Breeches";
    def.description = "Embroidered with runes of power.";
    def.imagePath = "MAGES_BREECHES";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 7}, {"maxMana", 30}, {"speed", 2} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BOOTS_OF_THE_SCHOLAR";
    def.name = "Boots of the Scholar";
    def.description = "You feel smarter just wearing them.";
    def.imagePath = "BOOTS_OF_THE_SCHOLAR";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 5}, {"maxMana", 20} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "EXECUTIONERS_AXE";
    def.name = "Executioner's Axe";
    def.description = "A terrifyingly large, heavy-bladed axe.";
    def.imagePath = "EXECUTIONERS_AXE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"strength", 15}, {"speed", -8}, {"luck", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "RAPIER_OF_THE_DUELIST";
    def.name = "Duelist's Rapier";
    def.description = "A light blade that rewards precision.";
    def.imagePath = "RAPIER_OF_THE_DUELIST";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 12}, {"speed", 5}, {"strength", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "WIZARD_HAT_OF_THE_OWL";
    def.name = "Owl's Wizard Hat";
    def.description = "Wide-brimmed and grants wisdom.";
    def.imagePath = "WIZARD_HAT_OF_THE_OWL";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"intellect", 8}, {"maxMana", 20}, {"speed", -1} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "KNIGHTS_CUIRASS";
    def.name = "Knight's Cuirass";
    def.description = "Polished steel plate.";
    def.imagePath = "KNIGHTS_CUIRASS";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 18}, {"strength", 5}, {"maxHealth", 20} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ROGUES_LEGGINGS";
    def.name = "Rogue's Leggings";
    def.description = "Fitted leather with many hidden pockets.";
    def.imagePath = "ROGUES_LEGGINGS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"dexterity", 8}, {"speed", 4}, {"defense", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PLATE_LEGGINGS";
    def.name = "Plate Leggings";
    def.description = "Standard issue for foot soldiers.";
    def.imagePath = "PLATE_LEGGINGS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"defense", 15}, {"maxHealth", 20} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BOOTS_OF_THE_EXPLORER";
    def.name = "Explorer's Boots";
    def.description = "Comfortable, durable, and well-worn.";
    def.imagePath = "BOOTS_OF_THE_EXPLORER";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 2; // TIER 2
    def.stats = { {"speed", 6}, {"luck", 3} };
    itemDatabase[def.id] = def;

    // --- Tier 3: Unique & Hybrid Items (35 Items) ---
    def = {};
    def.id = "BATTLEMAGE_PLATE";
    def.name = "Battlemage Plate";
    def.description = "Steel plate inscribed with mana conduits.";
    def.imagePath = "BATTLEMAGE_PLATE";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 15}, {"intellect", 8}, {"maxMana", 25}, {"speed", -4} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SPELLTHIEF_GLOVES";
    def.name = "Spellthief Gloves";
    def.description = "Lets you 'borrow' magical energy.";
    def.imagePath = "SPELLTHIEF_GLOVES";
    def.equipSlot = EquipSlot::Top; // Using Top for "Gloves"
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"dexterity", 10}, {"intellect", 10}, {"maxMana", 20} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SWASHBUCKLERS_BOOTS";
    def.name = "Swashbuckler's Boots";
    def.description = "Stylish boots with reinforced toes for kicking.";
    def.imagePath = "SWASHBUCKLERS_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 5}, {"strength", 5}, {"dexterity", 5}, {"speed", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HELM_OF_THE_GAMBLER";
    def.name = "Helm of the Gambler";
    def.description = "Lady Luck is on your side. Usually.";
    def.imagePath = "HELM_OF_THE_GAMBLER";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"luck", 25}, {"defense", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CLOAK_OF_MISFORTUNE";
    def.name = "Cloak of Misfortune";
    def.description = "You feel... unlucky. But strangely durable.";
    def.imagePath = "CLOAK_OF_MISFORTUNE";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 20}, {"maxHealth", 50}, {"luck", -20} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BOOTS_OF_BLINDING_SPEED";
    def.name = "Boots of Blinding Speed";
    def.description = "So fast you can't see straight.";
    def.imagePath = "BOOTS_OF_BLINDING_SPEED";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"speed", 30}, {"dexterity", -10}, {"defense", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PANTS_OF_THE_TITAN";
    def.name = "Pants of the Titan";
    def.description = "Impossibly heavy, impossibly strong.";
    def.imagePath = "PANTS_OF_THE_TITAN";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 20}, {"maxHealth", 50}, {"defense", 15}, {"speed", -15} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ROBE_OF_THE_ARCHLICH";
    def.name = "Robe of the Archlich";
    def.description = "Vast power, at the cost of vitality.";
    def.imagePath = "ROBE_OF_THE_ARCHLICH";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 30}, {"maxMana", 100}, {"maxHealth", -75}, {"defense", 5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CROWN_OF_COMMAND";
    def.name = "Crown of Command";
    def.description = "A crown for a true leader.";
    def.imagePath = "CROWN_OF_COMMAND";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 8}, {"intellect", 8}, {"dexterity", 8} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "RABBITS_FOOT_AMULET";
    def.name = "Rabbit's Foot Amulet";
    def.description = "It's... just a rabbit's foot. Or is it?";
    def.imagePath = "RABBITS_FOOT_AMULET";
    def.equipSlot = EquipSlot::Hat; // Using Hat for "Amulet"
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"luck", 10} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "RUNE_BLADE";
    def.name = "Rune-Blade";
    def.description = "The blade changes its edge based on your thoughts.";
    def.imagePath = "RUNE_BLADE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 12}, {"intellect", 12}, {"maxMana", 30} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PLAGUE_DOCTOR_MASK";
    def.name = "Plague Doctor Mask";
    def.description = "Filled with sweet-smelling, dubious herbs.";
    def.imagePath = "PLAGUE_DOCTOR_MASK";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 10}, {"luck", 5}, {"maxHealth", -15} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HARLEQUIN_VEST";
    def.name = "Harlequin Vest";
    def.description = "A chaotic, multi-colored vest.";
    def.imagePath = "HARLEQUIN_VEST";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"luck", 20}, {"strength", -5}, {"intellect", 5}, {"dexterity", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "KILT_OF_THE_HIGHLANDER";
    def.name = "Highlander's Kilt";
    def.description = "Surprisingly freeing in a fight.";
    def.imagePath = "KILT_OF_THE_HIGHLANDER";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 8}, {"speed", 8}, {"defense", 3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "GOBLIN_ROCKET_BOOTS";
    def.name = "Goblin Rocket Boots";
    def.description = "WARNING: Unstable.";
    def.imagePath = "GOBLIN_ROCKET_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"speed", 40}, {"maxHealth", -25}, {"defense", -10}, {"luck", -5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SCEPTER_OF_THE_PRIEST";
    def.name = "Priest's Scepter";
    def.description = "A heavy scepter that channels healing light.";
    def.imagePath = "SCEPTER_OF_THE_PRIEST";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 8}, {"maxHealth", 25}, {"maxMana", 25} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BLOODTHIRSTY_BLADE";
    def.name = "Bloodthirsty Blade";
    def.description = "It feeds on your vitality.";
    def.imagePath = "BLOODTHIRSTY_BLADE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 10}, {"maxHealth", -20} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "FROZEN_WAND";
    def.name = "Frozen Wand";
    def.description = "Permanently cold to the touch.";
    def.imagePath = "FROZEN_WAND";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 15}, {"speed", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "FOOLS_DAGGER";
    def.name = "Fool's Dagger";
    def.description = "Looks impressive, but the hilt is backwards.";
    def.imagePath = "FOOLS_DAGGER";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"luck", 20}, {"dexterity", 5}, {"strength", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HELM_OF_THE_SLEEPLESS";
    def.name = "Helm of the Sleepless";
    def.description = "You no longer feel tired, but you look it.";
    def.imagePath = "HELM_OF_THE_SLEEPLESS";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"maxMana", 50}, {"maxHealth", -20}, {"intellect", 5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "JUGGERNAUTS_VISAGE";
    def.name = "Juggernaut's Visage";
    def.description = "You can't be stopped. You also can't turn well.";
    def.imagePath = "JUGGERNAUTS_VISAGE";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 20}, {"maxHealth", 50}, {"speed", -10}, {"dexterity", -10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CROWN_OF_THE_FALSE_KING";
    def.name = "False King's Crown";
    def.description = "All the style, none of the responsibility.";
    def.imagePath = "CROWN_OF_THE_FALSE_KING";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"luck", 15}, {"strength", 5}, {"dexterity", 5}, {"intellect", 5}, {"defense", -15} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ROBE_OF_THE_CHAMELEON";
    def.name = "Robe of the Chameleon";
    def.description = "Changes color to match your surroundings.";
    def.imagePath = "ROBE_OF_THE_CHAMELEON";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 8}, {"dexterity", 8}, {"intellect", 8}, {"strength", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "MANTLE_OF_THE_MAGMA";
    def.name = "Mantle of the Magma";
    def.description = "Drips lava, but doesn't burn you.";
    def.imagePath = "MANTLE_OF_THE_MAGMA";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 15}, {"intellect", 10}, {"strength", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BARBED_ARMOR";
    def.name = "Barbed Armor";
    def.description = "Hugs are ill-advised.";
    def.imagePath = "BARBED_ARMOR";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"defense", 20}, {"strength", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PANTS_OF_THE_GIANT";
    def.name = "Giant's Pants";
    def.description = "Absurdly large, but magically resize.";
    def.imagePath = "PANTS_OF_THE_GIANT";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 15}, {"maxHealth", 40}, {"speed", -8} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "GREAVES_OF_THE_WIND";
    def.name = "Greaves of the Wind";
    def.description = "A constant breeze follows you.";
    def.imagePath = "GREAVES_OF_THE_WIND";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"speed", 15}, {"defense", 5}, {"dexterity", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "POISONERS_PANTS";
    def.name = "Poisoner's Pants";
    def.description = "Lined with pockets for vials and reagents.";
    def.imagePath = "POISONERS_PANTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"dexterity", 7}, {"intellect", 7} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LUCKY_PANTS";
    def.name = "Lucky Pants";
    def.description = "You found a coin in the pocket!";
    def.imagePath = "LUCKY_PANTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"luck", 25}, {"defense", -5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SORCERERS_SKIRT";
    def.name = "Sorcerer's Skirt";
    def.description = "A fine silk skirt, surprisingly practical.";
    def.imagePath = "SORCERERS_SKIRT";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 10}, {"maxMana", 25}, {"defense", 3} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BOOTS_OF_THE_STAMPEDE";
    def.name = "Boots of the Stampede";
    def.description = "Heavy, hoof-like boots.";
    def.imagePath = "BOOTS_OF_THE_STAMPEDE";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"strength", 10}, {"speed", 5}, {"defense", 3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "FLOATING_SHOES";
    def.name = "Floating Shoes";
    def.description = "You hover an inch off the ground.";
    def.imagePath = "FLOATING_SHOES";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"speed", 10}, {"defense", -2} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "BOOTS_OF_THE_GAMBLER";
    def.name = "Gambler's Boots";
    def.description = "These boots have seen better days.";
    def.imagePath = "BOOTS_OF_THE_GAMBLER";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"speed", 5}, {"luck", 15}, {"defense", -3} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "MAGES_SHOES";
    def.name = "Mage's Shoes";
    def.description = "Comfortable velvet shoes.";
    def.imagePath = "MAGES_SHOES";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 5}, {"maxMana", 15}, {"speed", 3} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SILK_PANTS";
    def.name = "Silk Pants";
    def.description = "Very light and comfortable.";
    def.imagePath = "SILK_PANTS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 3; // TIER 3
    def.stats = { {"intellect", 3}, {"maxMana", 10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    // --- Tier 4: Legendary Items (14 Items) ---
    def = {};
    def.id = "DRAGONSCALE_MAIL";
    def.name = "Dragonscale Mail";
    def.description = "Shimmers with every color. Impervious to flame.";
    def.imagePath = "DRAGONSCALE_MAIL";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"defense", 35}, {"strength", 10}, {"maxHealth", 50} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HEARTSEEKER_BOW";
    def.name = "Heartseeker";
    def.description = "An arrow from this bow never misses its mark.";
    def.imagePath = "HEARTSEEKER_BOW";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"dexterity", 30}, {"luck", 15}, {"speed", 10} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "STAFF_OF_THE_COSMOS";
    def.name = "Staff of the Cosmos";
    def.description = "You can hear the stars whispering.";
    def.imagePath = "STAFF_OF_THE_COSMOS";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"intellect", 40}, {"maxMana", 200}, {"speed", 5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "VOIDWALKER_BOOTS";
    def.name = "Voidwalker Boots";
    def.description = "These boots don't touch the ground.";
    def.imagePath = "VOIDWALKER_BOOTS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"speed", 15}, {"dexterity", 10}, {"intellect", 10}, {"defense", 5} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ETHEREAL_BLADE";
    def.name = "Ethereal Blade";
    def.description = "A blade that cuts between worlds.";
    def.imagePath = "ETHEREAL_BLADE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"dexterity", 20}, {"intellect", 20}, {"defense", -10} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "PHOENIX_HELM";
    def.name = "Phoenix Helm";
    def.description = "A helm of golden feathers. Warm to the touch.";
    def.imagePath = "PHOENIX_HELM";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"defense", 10}, {"maxHealth", 30}, {"intellect", 10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "MASK_OF_THE_SHADOW";
    def.name = "Mask of the Shadow";
    def.description = "You are one with the darkness.";
    def.imagePath = "MASK_OF_THE_SHADOW";
    def.equipSlot = EquipSlot::Hat;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"dexterity", 20}, {"speed", 10}, {"defense", 5}, {"maxHealth", -25} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "CELESTIAL_RAIMENT";
    def.name = "Celestial Raiment";
    def.description = "Woven from starlight.";
    def.imagePath = "CELESTIAL_RAIMENT";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"defense", 20}, {"intellect", 20}, {"maxMana", 100}, {"maxHealth", 50} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "TITANS_PLATE";
    def.name = "Titan's Plate";
    def.description = "Armor forged for a demigod.";
    def.imagePath = "TITANS_PLATE";
    def.equipSlot = EquipSlot::Top;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"strength", 30}, {"defense", 40}, {"speed", -20} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "VOIDWALKER_LEGGINGS";
    def.name = "Voidwalker Leggings";
    def.description = "Your legs phase in and out of reality.";
    def.imagePath = "VOIDWALKER_LEGGINGS";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"intellect", 15}, {"dexterity", 15}, {"speed", 10}, {"defense", 8} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "FOUNDATION_GREAVES";
    def.name = "Foundation Greaves";
    def.description = "The very bedrock of a good defense.";
    def.imagePath = "FOUNDATION_GREAVES";
    def.equipSlot = EquipSlot::Bottom;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"defense", 25}, {"maxHealth", 100}, {"speed", -10} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "HERMES_SANDALS";
    def.name = "Sandals of Hermes";
    def.description = "Tiny wings flutter at your ankles.";
    def.imagePath = "HERMES_SANDALS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"speed", 25}, {"dexterity", 10} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "COLOSSUS_TREADS";
    def.name = "Colossus Treads";
    def.description = "Each step shakes the ground.";
    def.imagePath = "COLOSSUS_TREADS";
    def.equipSlot = EquipSlot::Boots;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"strength", 15}, {"defense", 15}, {"maxHealth", 50}, {"speed", -5} }; // Fixed stat name
    itemDatabase[def.id] = def;

    def = {};
    def.id = "INFINITY_EDGE";
    def.name = "Infinity Edge";
    def.description = "A sword that folds space.";
    def.imagePath = "INFINITY_EDGE";
    def.equipSlot = EquipSlot::Weapon;
    def.stackable = false;
    def.item_tier = 4; // TIER 4
    def.stats = { {"strength", 25}, {"dexterity", 25}, {"luck", 10} };
    itemDatabase[def.id] = def;

    // --- Consumables (6 Items) ---
    def = {};
    def.id = "SMALL_HEALTH_POTION";
    def.name = "Small Health Potion";
    def.description = "Restores 50 Health.";
    def.imagePath = "SMALL_HEALTH_POTION";
    def.equipSlot = EquipSlot::None;
    def.stackable = true;
    def.item_tier = 1; // TIER 1 (Consumable)
    def.stats = {};
    def.effects = { ItemEffect{"USE", {{"action", "RESTORE_HEALTH"}, {"amount", "50"}}} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LARGE_HEALTH_POTION";
    def.name = "Large Health Potion";
    def.description = "Restores 250 Health.";
    def.imagePath = "LARGE_HEALTH_POTION";
    def.equipSlot = EquipSlot::None;
    def.stackable = true;
    def.item_tier = 3; // TIER 3 (Consumable)
    def.stats = {};
    def.effects = { ItemEffect{"USE", {{"action", "RESTORE_HEALTH"}, {"amount", "250"}}} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "SMALL_MANA_POTION";
    def.name = "Small Mana Potion";
    def.description = "Restores 50 Mana.";
    def.imagePath = "SMALL_MANA_POTION";
    def.equipSlot = EquipSlot::None;
    def.stackable = true;
    def.item_tier = 1; // TIER 1 (Consumable)
    def.stats = {};
    def.effects = { ItemEffect{"USE", {{"action", "RESTORE_MANA"}, {"amount", "50"}}} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "LARGE_MANA_POTION";
    def.name = "Large Mana Potion";
    def.description = "Restores 250 Mana.";
    def.imagePath = "LARGE_MANA_POTION";
    def.equipSlot = EquipSlot::None;
    def.stackable = true;
    def.item_tier = 3; // TIER 3 (Consumable)
    def.stats = {};
    def.effects = { ItemEffect{"USE", {{"action", "RESTORE_MANA"}, {"amount", "250"}}} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ELIXIR_OF_SPEED";
    def.name = "Elixir of Speed";
    def.description = "Temporarily grants +20 Speed.";
    def.imagePath = "ELIXIR_OF_SPEED";
    def.equipSlot = EquipSlot::None;
    def.stackable = true;
    def.item_tier = 2; // TIER 2 (Consumable)
    def.stats = {};
    def.effects = { ItemEffect{"USE", {{"action", "APPLY_BUFF"}, {"stat", "speed"}, {"amount", "20"}, {"duration", "30"}}} };
    itemDatabase[def.id] = def;

    def = {};
    def.id = "ELIXIR_OF_GIANTS_STRENGTH";
    def.name = "Elixir of Giant's Strength";
    def.description = "Temporarily grants +20 Strength.";
    def.imagePath = "ELIXIR_OF_GIANTS_STRENGTH";
    def.equipSlot = EquipSlot::None;
    def.stackable = true;
    def.item_tier = 2; // TIER 2 (Consumable)
    def.stats = {};
    def.effects = { ItemEffect{"USE", {{"action", "APPLY_BUFF"}, {"stat", "strength"}, {"amount", "20"}, {"duration", "30"}}} };
    itemDatabase[def.id] = def;
}

 //--- NEW LOOT TABLES ---A
 //We now define loot tables by monster *type* (their key)
 //This is more flexible.
const std::map<std::string, std::vector<std::string>> g_loot_tables_by_tier = {
    {
        "SLIME", { "SMALL_HEALTH_POTION", "RUSTY_SWORD" }
    },
    {
        "GOBLIN", { "SMALL_HEALTH_POTION", "BENT_DAGGER", "CLOTH_CAP" }
    },
    {
        "WOLF", { "LEATHER_TUNIC" } // Example: Wolves drop leather
    },
    {
        "SKELETON", { "RUSTY_SWORD", "IRON_HELMET", "SMALL_HEALTH_POTION" }
    },
    {
        "GIANT_SPIDER", { "SMALL_HEALTH_POTION", "LEATHER_PANTS", "POISONED_STILETTO" }
    },
    {
        "ORC_BRUTE", { "IRON_BROADSWORD", "HEAVY_IRON_HELM", "CHAINMAIL_SHIRT" }
    },
    {
        "DEFAULT_TIER_0", {
            "RUSTY_SWORD", "WET_SHIRT", "BROKEN_SANDALS", "DULL_AXE", "BENT_DAGGER",
            "SPLINTERED_STICK", "SOILED_TROUSERS", "BARELY_BOOTS", "CRACKED_WAND"
        }
    },
    {
        "DEFAULT_TIER_1", {
            "IRON_BROADSWORD", "IRON_HELMET", "CHAINMAIL_SHIRT", "IRON_GREAVES",
            "STEEL_BOOTS", "STEEL_DAGGER", "IRON_SPEAR", "HEAVY_IRON_HELM",
            "QUILTED_ARMOR", "STURDY_BREECHES", "CHAINMAIL_LEGGINGS",
            "HEAVY_STEEL_BOOTS", "SMALL_HEALTH_POTION", "SMALL_MANA_POTION"
        }
    },
    {
        "DEFAULT_TIER_2", {
            "KNIGHTS_GREATHELM", "TITANIUM_PLATEBODY", "BERSERKERS_AXE",
            "WARHAMMER_OF_THE_ZEALOT", "OBSIDIAN_MACE", "BARBARIAN_WARHELM",
            "SPIKED_PLATE_ARMOR", "PLATE_LEGGINGS_OF_THE_GUARDIAN", "SABATONS_OF_THE_BERSERKER",
            "ASSASSINS_MASK", "SHADOW_LEATHER_CHAPS", "POISONED_STILETTO",
            "TRICKSTERS_CAP", "PHANTOM_CLOAK", "SILKEN_SLIPPERS", "JESTERS_TIGHTS",
            "ARCHMAGE_CIRCLET", "ROBES_OF_THE_SCHOLAR", "CRYSTAL_TOME",
            "GOGGLES_OF_PERCEPTION", "DRUIDS_RAIMENT", "MAGES_BREECHES",
            "BOOTS_OF_THE_SCHOLAR", "LARGE_HEALTH_POTION"
        }
    },
    {
        "DEFAULT_TIER_3", {
            "BATTLEMAGE_PLATE", "SPELLTHIEF_GLOVES", "SWASHBUCKLERS_BOOTS",
            "HELM_OF_THE_GAMBLER", "CLOAK_OF_MISFORTUNE", "BOOTS_OF_BLINDING_SPEED",
            "PANTS_OF_THE_TITAN", "ROBE_OF_THE_ARCHLICH", "CROWN_OF_COMMAND",
            "RABBITS_FOOT_AMULET", "RUNE_BLADE", "PLAGUE_DOCTOR_MASK",
            "HARLEQUIN_VEST", "KILT_OF_THE_HIGHLANDER", "GOBLIN_ROCKET_BOOTS",
            "SCEPTER_OF_THE_PRIEST", "LARGE_MANA_POTION"
        }
    },
    {
        "DEFAULT_TIER_4", {
            "DRAGONSCALE_MAIL", "HEARTSEEKER_BOW", "STAFF_OF_THE_COSMOS",
            "VOIDWALKER_BOOTS", "ETHEREAL_BLADE", "PHOENIX_HELM", "MASK_OF_THE_SHADOW",
            "CELESTIAL_RAIMENT", "TITANS_PLATE", "VOIDWALKER_LEGGINGS",
            "FOUNDATION_GREAVES", "HERMES_SANDALS", "COLOSSUS_TREADS", "INFINITY_EDGE"
        }
    }
};

void initialize_random_effect_pool() {
    // TIER 1: Common Effects (Weight 100)
    // Simple stat boosts
    g_random_effect_pool.push_back({ "STRENGTH_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "METAL_EFFECT", {"GRANT_STAT", {{"stat", "defense"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "WIND_EFFECT", {"GRANT_STAT", {{"stat", "speed"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "LIFE_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "5"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "ARCANE_EFFECT", {"GRANT_STAT", {{"stat", "maxMana"}, {"value", "5"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "BLESSING_EFFECT", {"GRANT_STAT", {{"stat", "luck"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "PSYCHIC_EFFECT", {"GRANT_STAT", {{"stat", "intellect"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "NATURE_EFFECT", {"GRANT_STAT", {{"stat", "dexterity"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "SAND_EFFECT", {"GRANT_STAT", {{"stat", "defense"}, {"value", "1"}}}, 100, 1 });
    g_random_effect_pool.push_back({ "SOUND_EFFECT", {"GRANT_STAT", {{"stat", "intellect"}, {"value", "1"}}}, 100, 1 });

    // TIER 2: Uncommon Effects (Weight 50)
    // Better stat boosts
    g_random_effect_pool.push_back({ "STRENGTH_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "3"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "METAL_EFFECT", {"GRANT_STAT", {{"stat", "defense"}, {"value", "3"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "WIND_EFFECT", {"GRANT_STAT", {{"stat", "speed"}, {"value", "3"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "LIFE_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "15"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "ARCANE_EFFECT", {"GRANT_STAT", {{"stat", "maxMana"}, {"value", "15"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "BLESSING_EFFECT", {"GRANT_STAT", {{"stat", "luck"}, {"value", "3"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "PSYCHIC_EFFECT", {"GRANT_STAT", {{"stat", "intellect"}, {"value", "3"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "NATURE_EFFECT", {"GRANT_STAT", {{"stat", "dexterity"}, {"value", "3"}}}, 50, 2 });
    // Weak dual-stats
    g_random_effect_pool.push_back({ "EARTH_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "1"}, {"stat2", "defense"}, {"value2", "1"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "WATER_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "5"}, {"stat2", "maxMana"}, {"value2", "5"}}}, 50, 2 });
    // Elemental spells
    g_random_effect_pool.push_back({ "BURN_EFFECT", {"GRANT_SPELL", {{"spell_id", "Fireball"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "ICE_EFFECT", {"GRANT_SPELL", {{"spell_id", "Freeze"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "LIGHTNING_EFFECT", {"GRANT_SPELL", {{"spell_id", "Lightning"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "POISON_EFFECT", {"GRANT_SPELL", {{"spell_id", "PoisonDart"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "ACID_EFFECT", {"GRANT_SPELL", {{"spell_id", "AcidSpray"}}}, 50, 2 });
    g_random_effect_pool.push_back({ "BLOOM_EFFECT", {"GRANT_SPELL", {{"spell_id", "Heal"}}}, 50, 2 });

    // TIER 3: Rare Effects (Weight 20)
    // Strong stat boosts
    g_random_effect_pool.push_back({ "STRENGTH_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "5"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "METAL_EFFECT", {"GRANT_STAT", {{"stat", "defense"}, {"value", "5"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "WIND_EFFECT", {"GRANT_STAT", {{"stat", "speed"}, {"value", "5"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "LIFE_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "30"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "ARCANE_EFFECT", {"GRANT_STAT", {{"stat", "maxMana"}, {"value", "30"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "BLESSING_EFFECT", {"GRANT_STAT", {{"stat", "luck"}, {"value", "5"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "PSYCHIC_EFFECT", {"GRANT_STAT", {{"stat", "intellect"}, {"value", "5"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "NATURE_EFFECT", {"GRANT_STAT", {{"stat", "dexterity"}, {"value", "5"}}}, 20, 3 });
    // Good dual-stats
    g_random_effect_pool.push_back({ "EARTH_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "3"}, {"stat2", "defense"}, {"value2", "3"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "FIRE_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "3"}, {"stat2", "intellect"}, {"value2", "3"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "HOLY_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "10"}, {"stat2", "defense"}, {"value2", "2"}}}, 20, 3 });
    // Curses (negative one, positive another)
    g_random_effect_pool.push_back({ "BLOOD_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "7"}, {"stat2", "maxHealth"}, {"value2", "-10"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "CURSE_EFFECT", {"GRANT_STAT", {{"stat", "intellect"}, {"value", "7"}, {"stat2", "speed"}, {"value2", "-3"}}}, 20, 3 });
    // Utility spells
    g_random_effect_pool.push_back({ "DREAM_EFFECT", {"GRANT_SPELL", {{"spell_id", "Sleep"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "FEAR_EFFECT", {"GRANT_SPELL", {{"spell_id", "Fear"}}}, 20, 3 });
    g_random_effect_pool.push_back({ "SHADOW_EFFECT", {"GRANT_SPELL", {{"spell_id", "Invisibility"}}}, 20, 3 });

    // TIER 4: Epic Effects (Weight 5)
    // Very strong stat boosts
    g_random_effect_pool.push_back({ "STRENGTH_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "8"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "METAL_EFFECT", {"GRANT_STAT", {{"stat", "defense"}, {"value", "8"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "LIFE_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "50"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "BLESSING_EFFECT", {"GRANT_STAT", {{"stat", "luck"}, {"value", "8"}}}, 5, 4 });
    // All stats
    g_random_effect_pool.push_back({ "ORDER_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "2"}, {"stat2", "dexterity"}, {"value2", "2"}, {"stat3", "intellect"}, {"value3", "2"}}}, 5, 4 });
    // Powerful Spells
    g_random_effect_pool.push_back({ "LAVA_EFFECT", {"GRANT_SPELL", {{"spell_id", "Volcano"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "ICE_EFFECT", {"GRANT_SPELL", {{"spell_id", "Blizzard"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "LIGHTNING_EFFECT", {"GRANT_SPELL", {{"spell_id", "ChainLightning"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "DEATH_EFFECT", {"GRANT_SPELL", {{"spell_id", "DrainLife"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "PLAGUE_EFFECT", {"GRANT_SPELL", {{"spell_id", "Pestilence"}}}, 5, 4 });
    g_random_effect_pool.push_back({ "HOLY_EFFECT", {"GRANT_SPELL", {{"spell_id", "HolySmite"}}}, 5, 4 });

    // TIER 5: Legendary Effects (Weight 1)
    // God-tier stats
    g_random_effect_pool.push_back({ "CELESTIAL_EFFECT", {"GRANT_STAT", {{"stat", "strength"}, {"value", "5"}, {"stat2", "dexterity"}, {"value2", "5"}, {"stat3", "intellect"}, {"value3", "5"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "CREATION_EFFECT", {"GRANT_STAT", {{"stat", "maxHealth"}, {"value", "50"}, {"stat2", "maxMana"}, {"value2", "50"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "BLESSING_EFFECT", {"GRANT_STAT", {{"stat", "luck"}, {"value", "15"}}}, 1, 5 });
    // Ultimate Spells
    g_random_effect_pool.push_back({ "DESTRUCTION_EFFECT", {"GRANT_SPELL", {{"spell_id", "Armageddon"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "TIME_EFFECT", {"GRANT_SPELL", {{"spell_id", "TimeStop"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "GRAVITY_EFFECT", {"GRANT_SPELL", {{"spell_id", "BlackHole"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "VOID_EFFECT", {"GRANT_SPELL", {{"spell_id", "VoidRift"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "PLASMA_EFFECT", {"GRANT_SPELL", {{"spell_id", "Supernova"}}}, 1, 5 });
    g_random_effect_pool.push_back({ "CHAOS_EFFECT", {"GRANT_SPELL", {{"spell_id", "MeteorSwarm"}}}, 1, 5 });
}

// Map of interactable objects
const std::map<std::string, std::vector<InteractableObject>> g_interactable_objects = {
    {
        "TOWN", {
        // --- NPCs/Shops ---
        { "TOWN_GUARD_NORTH", InteractableType::NPC,  {19, 2},  "GUARD_GREETING_CAVES" },
        { "TOWN_GUARD_EAST",  InteractableType::NPC,  {36, 18}, "GUARD_GREETING_FOREST" },
        { "TOWN_GUARD_WEST",  InteractableType::NPC,  {3,  18}, "GUARD_GREETING_OVERWORLD" },
        { "TOWN_CAPTAIN",     InteractableType::NPC,  {15, 12}, "GUARD_CAPTAIN_DIALOGUE" },
        { "TOWN_WEAPONSMITH", InteractableType::SHOP, {10, 10}, "SHOP_TOWN_WEAPONS" },
        { "TOWN_ARMORSMITH",  InteractableType::SHOP, {10, 15}, "SHOP_TOWN_ARMOR" },
        { "TOWN_ALCHEMIST",   InteractableType::SHOP, {5,  10}, "SHOP_TOWN_POTIONS" },
        { "TOWN_MAYOR",       InteractableType::NPC,  {13, 8},  "MAYOR_WELCOME_DIALOGUE" },
        { "TOWN_OLD_MAN",     InteractableType::NPC,  {25, 18}, "OLD_MAN_LORE_DIALOGUE" },

        // --- Zone Transitions (gates) ---
        // West gate on main road  OVERWORLD hub
        { "TOWN_TO_OVERWORLD", InteractableType::ZONE_TRANSITION, {0,  19}, "OVERWORLD" },
        // East gate on main road  FOREST
        { "TOWN_TO_FOREST",    InteractableType::ZONE_TRANSITION, {39, 19}, "FOREST" },
        // North gate  CAVES
        { "TOWN_TO_RUINS",     InteractableType::ZONE_TRANSITION, {20, 0},  "RUINS" },
        // South gate  MARKET
        { "TOWN_TO_MARKET",    InteractableType::ZONE_TRANSITION, {20, 21}, "MARKET" }
    }
},
{
    "OVERWORLD", {
        // --- NPCs ---
        { "OVERWORLD_GUIDE",      InteractableType::NPC, {37, 10}, "GUIDE_TOWN_DIALOGUE" },
        { "OVERWORLD_TRAVELER",   InteractableType::NPC, {12, 6},  "TRAVELER_FOREST_DIALOGUE" },
        { "OVERWORLD_PROSPECTOR", InteractableType::NPC, {19, 2},  "PROSPECTOR_MTN_DIALOGUE" },
        { "OVERWORLD_NOMAD",      InteractableType::NPC, {34, 20}, "NOMAD_DESERT_DIALOGUE" },

        // --- Zone Transitions ---
        // East edge back into TOWN west gate
        { "OVERWORLD_TO_TOWN",      InteractableType::ZONE_TRANSITION, {39, 19}, "TOWN" },
        { "OVERWORLD_TO_FOREST",    InteractableType::ZONE_TRANSITION, {10, 5},  "FOREST" },
        { "OVERWORLD_TO_MOUNTAINS", InteractableType::ZONE_TRANSITION, {20, 0},  "MOUNTAINS" },
        { "OVERWORLD_TO_RUINS",     InteractableType::ZONE_TRANSITION, {5,  20}, "RUINS" },
        { "OVERWORLD_TO_DESERT",    InteractableType::ZONE_TRANSITION, {35, 20}, "DESERT" },
        { "OVERWORLD_TO_VOLCANO",   InteractableType::ZONE_TRANSITION, {20, 21}, "VOLCANO" }
    }
},
{
    "MARKET", {
        { "MARKET_MERCHANT_1", InteractableType::SHOP, {10, 10}, "GENERAL_STORE_2" },
        { "MARKET_MERCHANT_2", InteractableType::SHOP, {15, 10}, "WEAPON_SHOP_2" },
        { "MARKET_MERCHANT_3", InteractableType::SHOP, {20, 10}, "ARMOR_SHOP_2" },

        // --- Zone Transitions ---
        { "MARKET_TO_TOWN", InteractableType::ZONE_TRANSITION, {10, 21}, "TOWN" }
    }
},
{
    "FOREST", {
        { "FOREST_HUNTER", InteractableType::NPC, {5, 15}, "HUNTER_FOREST_DIALOGUE" },

        // --- Zone Transitions ---
        { "FOREST_TO_TOWN",     InteractableType::ZONE_TRANSITION, {0,  10}, "TOWN" },
        { "FOREST_TO_FOREST2",  InteractableType::ZONE_TRANSITION, {39, 15}, "FOREST2" },
        { "FOREST_TO_OVERWORLD",InteractableType::ZONE_TRANSITION, {20, 0},  "OVERWORLD" }
    }
},
{
    "FOREST2", {
        // --- Zone Transitions ---
        { "FOREST2_TO_FOREST", InteractableType::ZONE_TRANSITION, {0,  15}, "FOREST" },
        { "FOREST2_TO_SWAMP",  InteractableType::ZONE_TRANSITION, {39, 10}, "SWAMP" },
        { "FOREST2_TO_RUINS",  InteractableType::ZONE_TRANSITION, {20, 0},  "RUINS" }
    }
},
{
    "CAVES", {
        { "CAVE_HERMIT",       InteractableType::NPC,  {5, 5},  "HERMIT_CAVE_DIALOGUE" },
        { "CAVE_SHADY_DEALER", InteractableType::SHOP, {7, 5},  "SHOP_SHADY_DEALER" },

        // --- Zone Transitions ---
        { "CAVES_TO_TOWN", InteractableType::ZONE_TRANSITION, {20, 21}, "TOWN" }
    }
},
{
    "RUINS", {
        { "RUINS_ARCHAEOLOGIST", InteractableType::NPC, {3, 3}, "ARCHAEOLOGIST_RUINS_DIALOGUE" },

        // --- Zone Transitions ---
        { "RUINS_TO_FOREST2",  InteractableType::ZONE_TRANSITION, {20, 21}, "FOREST2" },
        { "RUINS_TO_OVERWORLD",InteractableType::ZONE_TRANSITION, {0,  10}, "OVERWORLD" }
    }
},
{
    "VOLCANO", {
        // --- Zone Transitions ---
        { "VOLCANO_TO_DESERT",    InteractableType::ZONE_TRANSITION, {0,  10}, "DESERT" },
        { "VOLCANO_TO_OVERWORLD", InteractableType::ZONE_TRANSITION, {20, 21}, "OVERWORLD" }
    }
},
{
    "DESERT", {
        // --- Zone Transitions ---
        { "DESERT_TO_OVERWORLD", InteractableType::ZONE_TRANSITION, {0,  10}, "OVERWORLD" },
        { "DESERT_TO_VOLCANO",   InteractableType::ZONE_TRANSITION, {39, 10}, "VOLCANO" }
    }
},
{
    "SWAMP", {
        // --- Zone Transitions ---
        { "SWAMP_TO_FOREST2", InteractableType::ZONE_TRANSITION, {0, 10}, "FOREST2" }
    }
},
{
    "MOUNTAINS", {
        // --- Zone Transitions ---
        { "MOUNTAINS_TO_OVERWORLD", InteractableType::ZONE_TRANSITION, {20, 21}, "OVERWORLD" }
    }
},
};


// --- Empty entries for other areas to prevent errors ---
//{ "FOREST3", {} },
//{ "TOWN2", {} },
//{ "TOWN3", {} }
//};
// Map of shop inventories
const std::map<std::string, std::vector<std::string>> g_shops = {
    {
        "MERCHANT_SHOP_1", {
            "SMALL_HEALTH_POTION",
            "SMALL_MANA_POTION",
            "RUSTY_SWORD",
            "TORN_SHIRT",
            "PATCHED_PANTS",
            "FLIMSY_SANDALS"
        }
    }
};


// --- A* Pathfinding Implementation ---
namespace { // Use anonymous namespace to keep these helpers file-local
    /**
     * @struct Node
     * @brief A node for A* pathfinding. Includes position, costs, and parent.
     */
    struct Node {
        Point pos;
        int g, h, f; // g = cost, h = heuristic, f = g + h
        const Node* parent;

        Node(Point p, int g_val, int h_val, const Node* p_val)
            : pos(p), g(g_val), h(h_val), f(g_val + h_val), parent(p_val) {
        }

        // Used by the priority_queue to find the node with the lowest 'f' cost
        bool operator>(const Node& other) const {
            return f > other.f;
        }
    };

    /**
     * @brief Checks if a coordinate is within the grid boundaries.
     */
    bool is_valid(int x, int y) {
        return x >= 0 && x < GRID_COLS && y >= 0 && y < GRID_ROWS;
    }

    /**
     * @brief Checks if a tile is valid and walkable (not an obstacle).
     */
    bool is_walkable(int x, int y, const std::vector<std::vector<int>>& grid) {
        if (!is_valid(x, y)) return false;
        // Safety check
        if (y >= grid.size() || x >= grid[y].size()) return false;
        return grid[y][x] == 0;
    }

    /**
     * @brief Calculates the Manhattan distance heuristic for A*.
     */
    int calculate_heuristic(Point a, Point b) {
        return std::abs(a.x - b.x) + std::abs(a.y - b.y);
    }

} // end anonymous namespace

/**
 * @brief Main A* search function.
 */
std::deque<Point> A_Star_Search(Point start, Point end, const std::vector<std::vector<int>>& grid) {
    std::deque<Point> path;
    std::priority_queue<Node, std::vector<Node>, std::greater<Node>> open_list;
    std::set<std::pair<int, int>> closed_list;
    std::vector<std::unique_ptr<Node>> node_storage;

    if (!is_walkable(end.x, end.y, grid)) {
        return path; // Can't walk to the destination
    }

    auto start_node = std::make_unique<Node>(start, 0, calculate_heuristic(start, end), nullptr);
    open_list.push(*start_node);
    node_storage.push_back(std::move(start_node));

    const int D = 1; // Cost for 4-directional movement
    int dx[] = { 0, 0, 1, -1 };
    int dy[] = { 1, -1, 0, 0 };
    int num_directions = 4;

    while (!open_list.empty()) {
        Node current = open_list.top();
        open_list.pop();

        if (current.pos == end) {
            const Node* trace = &current;
            while (trace != nullptr) {
                path.push_front(trace->pos);
                trace = trace->parent;
            }
            path.pop_front(); // Remove the starting position
            return path;
        }

        if (closed_list.count({ current.pos.x, current.pos.y })) {
            continue; // Already processed this node
        }
        closed_list.insert({ current.pos.x, current.pos.y });

        for (int i = 0; i < num_directions; ++i) {
            Point next_pos = { current.pos.x + dx[i], current.pos.y + dy[i] };

            if (!is_walkable(next_pos.x, next_pos.y, grid) ||
                closed_list.count({ next_pos.x, next_pos.y })) {
                continue;
            }

            int new_g = current.g + D;
            int new_h = calculate_heuristic(next_pos, end);

            const Node* current_node_ptr = nullptr;
            for (auto it = node_storage.rbegin(); it != node_storage.rend(); ++it) {
                if ((*it)->pos == current.pos && (*it)->g == current.g) { // Check g-cost too
                    current_node_ptr = it->get();
                    break;
                }
            }

            if (current_node_ptr == nullptr) {
                // This should not happen if start node is handled, but as a fallback
                for (auto& node : node_storage) {
                    if (node->pos == current.pos) {
                        current_node_ptr = node.get();
                        break;
                    }
                }
            }


            auto next_node = std::make_unique<Node>(next_pos, new_g, new_h, current_node_ptr);
            open_list.push(*next_node);
            node_storage.push_back(std::move(next_node));
        }
    }
    return path; // No path found
}


// --- Class Starting Stats ---
PlayerStats getStartingStats(PlayerClass playerClass) {
    switch (playerClass) {
        // PlayerStats(health, mana, defense, speed, str, dex, intl, lck)
    case PlayerClass::FIGHTER: return PlayerStats(120, 20, 12, 8, 15, 10, 5, 5);
    case PlayerClass::WIZARD:  return PlayerStats(80, 100, 6, 10, 5, 8, 15, 7);
    case PlayerClass::ROGUE:   return PlayerStats(90, 40, 8, 15, 8, 15, 8, 10);
    default:                   return PlayerStats(100, 50, 10, 10, 10, 10, 10, 5);
    }
}

// Create a monster instance from a template
std::optional<MonsterInstance> create_monster(int id, const std::string& type) {

    // This lambda now returns a MonsterInstance directly
    auto make_monster = [&](const std::string& t) -> MonsterInstance {
        const auto& base = MONSTER_TEMPLATES.at(t); // Safe since caller checks
        MonsterInstance monster = base;             // Copy template
        monster.id = id;
        

        auto assetIt = MONSTER_ASSETS.find(t);
        monster.assetKey = (assetIt != MONSTER_ASSETS.end()) ? assetIt->second : "UNKNOWN_ASSET";

        return monster; // Return the object itself
        };

    auto it = MONSTER_TEMPLATES.find(type);
    if (it != MONSTER_TEMPLATES.end()) {
        return make_monster(type); // std::optional will be created from the MonsterInstance
    }

    std::cerr << "ERROR: Tried to create monster with invalid type '" << type
        << "'. Using fallback 'SLIME'." << std::endl;

    // Fallback if SLIME exists
    if (MONSTER_TEMPLATES.find("SLIME") != MONSTER_TEMPLATES.end()) {
        return make_monster("SLIME");
    }

    // If SLIME template somehow missing, pick first valid key
    if (!MONSTER_KEYS.empty()) {
        std::cerr << "WARNING: 'SLIME' missing  using first valid template '"
            << MONSTER_KEYS.front() << "'." << std::endl;
        return make_monster(MONSTER_KEYS.front());
    }

    // As a last resort, return an empty optional.
    // This completely fixes the "no default constructor" error.
    std::cerr << "CRITICAL: No monster templates defined! Returning empty optional." << std::endl;
    return std::nullopt;
}

void initialize_item_prices() {
    // This function now automatically prices items based on their tier from itemDatabase
    std::map<int, int> tierBuyPrices = {
        {0, 15},    // Tier 0 (Junk)
        {1, 50},    // Tier 1 (Common)
        {2, 150},   // Tier 2 (Mid-Grade)
        {3, 750},   // Tier 3 (Unique)
        {4, 3000},  // Tier 4 (Legendary)
    };

    //    for (const auto& pair : itemDatabase) {
    //        const ItemDefinition& def = pair.second;
    //        if (def.stackable) continue; // Skip stackables, they are priced manually
    //
    //        try {
    //            int price = tierBuyPrices.at(def.item_tier);
    //            g_item_buy_prices[def.id] = price;
    //        }
    //        catch (const std::out_of_range& e) {
    //            g_item_buy_prices[def.id] = 1; // Default price for un-tiered items
    //        }
    //    }
    //
    //    // Manually price consumables/stackables
    //    g_item_buy_prices["SMALL_HEALTH_POTION"] = 10;
    //    g_item_buy_prices["LARGE_HEALTH_POTION"] = 80;
    //    g_item_buy_prices["SMALL_MANA_POTION"] = 15;
    //    g_item_buy_prices["LARGE_MANA_POTION"] = 160;
    //    g_item_buy_prices["ELIXIR_OF_SPEED"] = 80;
    //    g_item_buy_prices["ELIXIR_OF_GIANTS_STRENGTH"] = 80;
    //
    //    std::cout << "Item prices initialized. " << g_item_buy_prices.size() << " items priced." << std::endl;
    //}
}

void initialize_item_id_counter(DatabaseManager& db_manager) {
    try {
        pqxx::connection C = db_manager.get_connection();
        pqxx::nontransaction N(C);
        std::string sql = "SELECT MAX(instance_id) FROM player_items";
        pqxx::result R = N.exec(sql);

        if (!R.empty() && !R[0][0].is_null()) {
            g_item_instance_id_counter = R[0][0].as<uint64_t>() + 1;
        }
        else {
            g_item_instance_id_counter = 1;
        }
        std::cout << "Item instance ID counter initialized to: " << g_item_instance_id_counter << std::endl;
    }
    catch (const std::exception& e) {
        std::cerr << "Warning: Could not initialize item ID counter from DB. Defaulting to 1. Error: " << e.what() << std::endl;
        g_item_instance_id_counter = 1;
    }
}
const ItemDefinition& ItemInstance::getDefinition() const {
    try {
        // Look up this instance's itemId in the global database
        return itemDatabase.at(itemId);
    }
    catch (const std::out_of_range&) {
        // This is a critical error, but we must return *something*.
        // Log it and return a known "bad" item.
        std::cerr << "CRITICAL: ItemInstance has invalid itemId: " << itemId << std::endl;

    // gonna manually set pots because i have them at tier 99
    g_item_buy_prices["SMALL_HEALTH_POTION"] = 10;
    g_item_buy_prices["LARGE_HEALTH_POTION"] = 80;
    g_item_buy_prices["SMALL_MANA_POTION"] = 15;
    g_item_buy_prices["LARGE_MANA_POTION"] = 160;
    g_item_buy_prices["ELIXIR_OF_SPEED"] = 80;
    g_item_buy_prices["ELIXIR_OF_GIANTS_STRENGTH"] = 80;

    std::cout << "Item prices initialized. " << g_item_buy_prices.size() << " items priced." << std::endl;
}
